# Redis configuration for edge devices
# Optimized for low memory and reliable operation

# Memory management
maxmemory 32mb
maxmemory-policy allkeys-lru
maxmemory-samples 3

# Persistence - optimized for edge devices
save 900 1
save 300 10
save 60 100
appendonly yes
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 16mb

# Network
bind 0.0.0.0
port 6379
tcp-backlog 128
timeout 300
tcp-keepalive 60

# General
databases 2
always-show-logo yes
loglevel notice
syslog-enabled no

# Clients
maxclients 50

# Lazy freeing
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes
replica-lazy-flush yes

# Threading
io-threads 1
io-threads-do-reads no

# Security (if needed)
# requirepass your_password_here
# rename-command FLUSHDB ""
# rename-command FLUSHALL ""
# rename-command CONFIG ""

# Disable potentially dangerous commands in production
rename-command DEBUG ""
rename-command SHUTDOWN SHUTDOWN_edge_device